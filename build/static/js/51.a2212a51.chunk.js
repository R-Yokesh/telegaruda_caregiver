"use strict";(self.webpackChunktelegaruda_caregiver=self.webpackChunktelegaruda_caregiver||[]).push([[51],{89302:(e,a,t)=>{t.d(a,{A:()=>s});var l=t(65043);const s=()=>{const e="https://telegaruda-api.a2zhealth.in/v1/",a="feafbab7cb630d7110a81685b90c4b82",[t,s]=(0,l.useState)(!1),[i,n]=(0,l.useState)(null),r=(0,l.useRef)({}),o=(0,l.useCallback)((async(a,t)=>{if(s(!0),null!==r&&void 0!==r&&r.current[a]&&a.startsWith("resource/vitals")&&(s(!0),r.current={}),null!==r&&void 0!==r&&r.current[a])return s(!1),r.current[a];try{const l=await fetch(e+a,t);if(!l.ok)throw new Error("Failed to fetch ".concat(a,": ").concat(l.statusText));const i=await l.json();return r.current[a]=i,s(!1),i}catch(i){throw s(!1),n("Error: ".concat(i.message)),i}}),[e]),c=(0,l.useCallback)((async e=>{const t={method:"GET",headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"X-API-KEY":a}};return await o(e,t)}),[o,a]),d=(0,l.useCallback)((async(e,t)=>{const l={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"X-API-KEY":a},body:JSON.stringify(t)};return await o(e,l)}),[o]),u=(0,l.useCallback)((async(e,t)=>{const l={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"X-API-KEY":a},body:JSON.stringify(t)};return await o(e,l)}),[o]),v=(0,l.useCallback)((async t=>{const l={method:"DELETE",headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token")),"X-API-KEY":a}};s(!0);try{const a=await fetch(e+t,l);if(!a.ok)throw new Error("Failed to fetch ".concat(t,": ").concat(a.statusText));const i=await a.json();return s(!1),i}catch(i){throw s(!1),n("Error: ".concat(i.message)),i}}),[a,e]);return{loading:t,error:i,get:c,post:d,patch:u,del:v,clearCache:(0,l.useCallback)((()=>{r.current={}}),[])}}},79505:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(80861),s=t(96105),i=(t(65043),t(61192)),n=t(73216),r=t(70579);const o=()=>{var e,a,t,o,c,d,u,v,m,h,p,x,g;const j=null===(e=(0,n.zy)().state)||void 0===e?void 0:e.PatientDetail;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.E,{className:"card-profile",children:(0,r.jsxs)(s.W,{className:"d-flex gap-4",children:[(0,r.jsx)("div",{className:"img-container",children:(0,r.jsx)("img",{src:i.s.patient1,alt:"profile-img"})}),(0,r.jsxs)("div",{className:"user-details",children:[(0,r.jsxs)("span",{className:"user-title",children:[null===j||void 0===j||null===(a=j.user)||void 0===a?void 0:a.first_name," ",null===j||void 0===j||null===(t=j.user)||void 0===t?void 0:t.last_name]}),(0,r.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,r.jsx)("p",{className:"user-email",children:null!==(o=null===j||void 0===j||null===(c=j.user)||void 0===c?void 0:c.email)&&void 0!==o?o:"--"}),(0,r.jsx)("p",{className:"user-email",children:"|"}),(0,r.jsxs)("p",{className:"user-email",children:[null===j||void 0===j||null===(d=j.user)||void 0===d?void 0:d.isd_code," ",null!==(u=null===j||void 0===j||null===(v=j.user)||void 0===v?void 0:v.mobile)&&void 0!==u?u:"--"]})]}),(0,r.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,r.jsxs)("p",{className:"user-email",children:["MRN: ",null!==(m=null===j||void 0===j||null===(h=j.additional_info)||void 0===h?void 0:h.mrn_number)&&void 0!==m?m:"--"]}),(0,r.jsx)("p",{className:"user-email",children:"|"}),(0,r.jsxs)("p",{className:"user-email",children:[null!==(p=null===j||void 0===j||null===(x=j.additional_info)||void 0===x?void 0:x.age)&&void 0!==p?p:"--"," yrs (","Male"===(null===j||void 0===j||null===(g=j.user)||void 0===g?void 0:g.gender)?" M ":" F ",")"]})]})]})]})})})}},17406:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(80861),s=t(96105),i=t(65043),n=t(61192),r=t(70579);const o=e=>{let{getCurrentTab:a}=e;const t=[{id:1,title:"Call",image:n.s.Call},{id:2,title:"Medical Profile",image:n.s.Notes},{id:3,title:"Camera Control",image:n.s.Camera},{id:4,title:"Pair",image:n.s.Qr}],[o,c]=(0,i.useState)((()=>{const e=localStorage.getItem("patiendDetailTab"),a=localStorage.getItem("PatientMenu"),l=()=>null===t||void 0===t?void 0:t.find((e=>(null===e||void 0===e?void 0:e.id)===Number(a)));return console.log(l()),e?JSON.parse(e):a?l():null}));return(0,r.jsx)(l.E,{className:"card-tabs",children:(0,r.jsx)(s.W,{className:"tabs-container",children:t.map(((e,t)=>(0,r.jsxs)("div",{className:"tab-items ".concat((null===e||void 0===e?void 0:e.id)===(null===o||void 0===o?void 0:o.id)?"tab-active":""),onClick:()=>(e=>{localStorage.removeItem("PatientSubMenu-1"),localStorage.removeItem("PatientSubMenu-2"),localStorage.removeItem("PatientSubMenu-3"),localStorage.removeItem("PatientMenu"),localStorage.setItem("patiendDetailTab",JSON.stringify(e)),c(e),a(null===e||void 0===e?void 0:e.id),(null===e||void 0===e?void 0:e.id)===(null===o||void 0===o?void 0:o.id)&&(a(null),c(null))})(e),children:[(0,r.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:"call",className:"tab-icon"}),(0,r.jsx)("span",{className:"tab-title",children:null===e||void 0===e?void 0:e.title})]},t)))})})}},99558:(e,a,t)=>{t.d(a,{A:()=>n});t(65043);var l=t(61192),s=t(20761),i=t(70579);const n=function(e){var a,t,n,r,o,c,d,u,v;let{DoctorDetail:m}=e;return(0,i.jsxs)("div",{className:"card-sec",children:[(0,i.jsxs)("div",{className:"row align-items-center",children:[(0,i.jsx)("div",{className:"profile col-4",children:(0,i.jsx)("img",{src:(null===m||void 0===m?void 0:m.profile)||l.s.NoImg,alt:"Patient-image"})}),(0,i.jsxs)("div",{className:"patient-details col-8 p-2",children:[(0,i.jsxs)("h5",{children:["Dr."," ",null!==m&&void 0!==m&&m.participants?null===m||void 0===m||null===(a=m.participants[1])||void 0===a||null===(t=a.participant_info)||void 0===t?void 0:t.name:"--"]}),(0,i.jsxs)("p",{className:"gap-sec d-flex flex-wrap",children:[(0,i.jsx)("small",{className:"fs-10 fw-500",children:null!==m&&void 0!==m&&m.participants?null===m||void 0===m||null===(n=m.participants[1])||void 0===n||null===(r=n.participant_info)||void 0===r?void 0:r.email:"--"}),(0,i.jsx)("small",{className:"fs-10 fw-500",children:"|"}),(0,i.jsx)("small",{className:"fs-10 fw-500",children:null!==m&&void 0!==m&&m.participants?null===m||void 0===m||null===(o=m.participants[1])||void 0===o||null===(c=o.participant_info)||void 0===c?void 0:c.phone:"--"})]}),(0,i.jsxs)("p",{className:"flex-sec-wrap gap-sec",children:[(0,i.jsx)("small",{className:"fs-10 fw-600",children:null!==m&&void 0!==m&&m.participants?null===m||void 0===m||null===(d=m.participants[1])||void 0===d||null===(u=d.participant_info)||void 0===u||null===(v=u.additional_info)||void 0===v?void 0:v.consult_speciality:"--"}),(0,i.jsx)("small",{className:"fs-10 fw-600",children:"|"}),(0,i.jsx)("small",{className:"fs-10 fw-600",children:null!==m&&void 0!==m&&m.scheduled_at?(0,s.r6)(null===m||void 0===m?void 0:m.scheduled_at):"--"})]})]})]}),(0,i.jsx)("img",{src:l.s.notes,className:"edit-icon",alt:"edit-icon"})]})}},64417:(e,a,t)=>{t.d(a,{A:()=>s});t(65043);var l=t(70579);const s=()=>(0,l.jsx)("div",{class:"loading",children:(0,l.jsxs)("svg",{height:"96px",width:"128px",viewBox:"0 0 64 48",children:[(0,l.jsx)("polyline",{id:"back",points:"0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"}),(0,l.jsx)("polyline",{id:"front",points:"0.157 23.954, 14 23.954, 21.843 48, 43 0, 50 24, 64 24"})]})})},90051:(e,a,t)=>{t.r(a),t.d(a,{default:()=>w});var l=t(65043),s=(t(79505),t(17406),t(44101)),i=t(44227),n=t(61192),r=t(99558),o=t(73216),c=t(35475),d=t(42878),u=t(11418),v=t(89689),m=t(16323),h=t(97397),p=t(85968),x=t(84709),g=t(31899),j=t.n(g),f=t(70579);const N=function(e){let{visible:a,setVisible:t,RegDoctors:n,getFilter:r}=e;const o=new Date,[c,g]=(0,l.useState)(null),[N,b]=(0,l.useState)(null),[D,y]=(0,l.useState)(""),[w,S]=(0,l.useState)({startDate:"",endDate:"",doctor:""}),C=()=>{if((()=>{let e=!0;const a={startDate:"",endDate:"",doctor:""};return c&&N&&c>N&&(a.startDate="Start date must be before end date.",a.endDate="End date must be after start date.",e=!1),!c&&N&&(a.startDate="Start date is required when end date is selected.",e=!1),c&&!N&&(a.endDate="End date is required when start date is selected.",e=!1),S(a),e})()){t(!1);const e={id:D||null,startDate:c?null===c||void 0===c?void 0:c.toLocaleDateString():null,endDate:N?null===N||void 0===N?void 0:N.toLocaleDateString():null};r(e)}};return(0,f.jsxs)(d.z,{visible:a,onClose:()=>t(!1),"aria-labelledby":"LiveDemoExampleLabel",className:"modal-cutomize",backdrop:"static",children:[(0,f.jsx)(u.E,{children:(0,f.jsx)(v.l,{id:"LiveDemoExampleLabel",children:"FILTER"})}),(0,f.jsxs)(m.T,{children:[(0,f.jsxs)(h.M,{"aria-label":"Default select example",onChange:e=>{const a=e.target.value;y(a),console.log("Selected doctor ID:",a),S((e=>({...e,doctor:""})))},value:D,children:[(0,f.jsx)("option",{value:"",children:"Filter with Doctor"})," ",null===n||void 0===n?void 0:n.map((e=>{var a,t,l,s;return(0,f.jsxs)("option",{value:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id,children:[null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.first_name," ",null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.last_name]},null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.id)}))]}),(0,f.jsxs)(s.s,{children:[(0,f.jsxs)(i.U,{lg:6,sm:12,children:[(0,f.jsx)("p",{className:"date-sec",children:"From Date"}),(0,f.jsx)(j(),{showIcon:!0,selected:c,onChange:e=>g(e),isClearable:!0,className:"date-range-picker picker-sec",dateFormat:"dd/MM/yyyy",maxDate:o}),w.startDate&&(0,f.jsx)("p",{className:"error-text",children:w.startDate})]}),(0,f.jsxs)(i.U,{lg:6,sm:12,children:[(0,f.jsx)("p",{className:"date-sec",children:"End Date"}),(0,f.jsx)(j(),{showIcon:!0,selected:N,onChange:e=>b(e),isClearable:!0,className:"date-range-picker picker-sec",dateFormat:"dd/MM/yyyy",maxDate:o}),w.endDate&&(0,f.jsx)("p",{className:"error-text",children:w.endDate})]})]})]}),(0,f.jsxs)(p.I,{children:[(0,f.jsx)(x.Q,{color:"secondary",onClick:()=>(g(),b(),y(""),void S({startDate:"",endDate:"",doctor:""})),className:"clear-filter-btn",children:"Clear Filter"}),(0,f.jsx)(x.Q,{color:"primary",className:"apply-filter-sec",onClick:()=>C(),children:"Apply Filter"})]})]})};var b=t(89302),D=t(28644),y=t(64417);const w=function(){var e;const[a,t]=(0,l.useState)(!1),d=(0,o.Zp)(),[u,v]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[p,x]=(0,l.useState)(0),[g,j]=(0,l.useState)({id:null,startDate:null,endDate:null}),{loading:w,error:S,get:C,post:k}=(0,b.A)(),[E,_]=(0,l.useState)(1),I=null===(e=(0,o.zy)().state)||void 0===e?void 0:e.PatientDetail,P=()=>{d("/patients/summary",{state:{PatientDetail:I}}),localStorage.removeItem("patiendDetailTab")};(0,l.useEffect)((()=>{(async()=>{try{const l=await C("resource/consults?limit=".concat(9,"&page=").concat(E).concat(null!==g.id?"&participant_ref_number=".concat(g.id):"").concat(null!==g.startDate?"&from_date=".concat(g.startDate):"").concat(null!==g.endDate?"&to_date=".concat(g.endDate):""));var e,a,t;console.log(l),200===l.code?(h(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.consults),x(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(t=a.pagination)||void 0===t?void 0:t.total)):h([])}catch(l){console.error("Error fetching data:",l)}})()}),[E,g]);const A=(0,l.useCallback)((async()=>{try{const a=await C("resource/providers?order_by=id&dir=1");var e;if(console.log(a),200===a.code)v(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.providers);else v([])}catch(a){console.error("Error fetching data:",a)}}),[C]);return(0,l.useEffect)((()=>{A()}),[A]),console.log("getFilter",g),(0,f.jsxs)("section",{className:"call-history-sec",children:[(0,f.jsxs)("div",{className:"flex-sec top-sec",children:[(0,f.jsxs)("div",{className:"bread-crumbs",children:[(0,f.jsxs)("p",{className:"mb-0",children:[(0,f.jsx)(c.N_,{to:"/patients",children:"Patient"})," /"," ",(0,f.jsx)(c.N_,{to:"/patients",className:"active",children:"Existing Patient"})]}),(0,f.jsx)("h4",{children:"Appointments - Call History"})]}),(0,f.jsx)("div",{className:"patient-adding",children:(0,f.jsxs)("button",{onClick:()=>t(!a),children:[(0,f.jsx)("img",{src:n.s.filter,alt:"filter-sec",className:"filter-icon"})," ","Filter"]})})]}),(0,f.jsx)("div",{className:"doctor-card-sec",children:(0,f.jsxs)("div",{className:"row",children:[w?(0,f.jsx)("div",{className:"d-flex w-100 justify-content-center mb-3 align-items-center",style:{height:"350px",maxHeight:"100%"},children:(0,f.jsx)(y.A,{})}):m.length<=0?(0,f.jsx)("div",{className:"d-flex w-100 justify-content-center mb-3 align-items-center",style:{height:"350px",maxHeight:"100%"},children:(0,f.jsx)("h5",{children:"No Data Found"})}):(0,f.jsx)(f.Fragment,{children:m.map(((e,a)=>(0,f.jsx)("div",{className:"col-4",onClick:()=>P(),children:(0,f.jsx)(c.N_,{className:"card-link",children:(0,f.jsx)(r.A,{DoctorDetail:e})})})))}),(0,f.jsx)(s.s,{className:"mb-3",children:(0,f.jsx)(i.U,{lg:12,className:"d-flex justify-content-center",children:(0,f.jsx)(D.A,{currentPage:E,onPageChange:e=>{_(e)},totalItems:p,itemsPerPage:9})})})]})}),(0,f.jsx)("div",{className:"modal-sec",children:(0,f.jsx)(N,{visible:a,setVisible:t,RegDoctors:u,getFilter:e=>{j(e)}})})]})}}}]);
//# sourceMappingURL=51.a2212a51.chunk.js.map